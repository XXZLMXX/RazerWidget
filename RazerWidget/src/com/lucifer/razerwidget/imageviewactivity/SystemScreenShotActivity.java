package com.lucifer.razerwidget.imageviewactivity;import com.lucifer.razerlib.imageview.screenshot.ActivityUtils;import com.lucifer.razerlib.imageview.screenshot.ScreenshotTaker;import com.lucifer.razerlib.imageview.screenshot.Sleeper;import com.lucifer.razerlib.imageview.screenshot.ViewFetcher;import com.lucifer.razerwidget.R;import android.app.Activity;import android.app.Instrumentation;import android.graphics.Bitmap;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.Toast;public class SystemScreenShotActivity extends Activity{	private Button btn_shot;	private Handler handler = new Handler()	{		@Override		public void handleMessage(Message msg)		{			// TODO Auto-generated method stub			switch (msg.what)			{			case 101:				Toast.makeText(getApplicationContext(), "截屏成功", 1000).show();				break;			default:				break;			}		}	};	@Override	protected void onCreate(Bundle savedInstanceState)	{		// TODO Auto-generated method stub		super.onCreate(savedInstanceState);		setContentView(R.layout.aty_systemscreenshot);		btn_shot = (Button) findViewById(R.id.btn_shot);		btn_shot.setOnClickListener(new OnClickListener()		{			@Override			public void onClick(View v)			{				// 下面两种方法都可以系统截屏				new Thread(new Runnable()				{					@Override					public void run()					{						// TODO Auto-generated method stub						Instrumentation instrumentation = new Instrumentation();						Sleeper sleeper = new Sleeper();						ActivityUtils activityUtils = new ActivityUtils(								instrumentation, SystemScreenShotActivity.this,								sleeper);						ViewFetcher viewFetcher = new ViewFetcher(activityUtils);						ScreenshotTaker screenshotTaker = new ScreenshotTaker(								activityUtils, viewFetcher, sleeper);						screenshotTaker.takeScreenshot("mvshare", 40);						handler.sendEmptyMessage(101);					}				}).start();								/*Bitmap bitmap = ScreenUtils.snapShotWithStatusBar(SystemScreenShotActivity.this);				if(bitmap != null)				{					handler.sendEmptyMessage(101);				}*/			}		});	}}