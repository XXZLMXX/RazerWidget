package com.lucifer.razerwidget.scrolllistgridviewactivity.pullscrolllistgridaty;import java.util.ArrayList;import org.kymjs.kjframe.KJBitmap;import com.lucifer.razerlib.scrolllistgridview.pullscrolllistgrid.ListViewForScrollView;import com.lucifer.razerlib.scrolllistgridview.pullscrolllistgrid.PullToRefreshView;import com.lucifer.razerlib.scrolllistgridview.pullscrolllistgrid.PullToRefreshView.OnFooterRefreshListener;import com.lucifer.razerlib.scrolllistgridview.pullscrolllistgrid.PullToRefreshView.OnHeaderRefreshListener;import com.lucifer.razerwidget.R;import android.app.Activity;import android.os.Bundle;import android.view.View;import android.view.ViewGroup;import android.view.animation.AnimationUtils;import android.view.animation.RotateAnimation;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.TextView;public class PullScrollListActivity extends Activity implements OnHeaderRefreshListener, OnFooterRefreshListener{	PullToRefreshView pullrefreshview_scroll_listview;	private ListViewForScrollView lv_pullscrolllist;	private ListAdapter adapter;	private ArrayList<DataBean> datas;		String imageUrl = "http://d.hiphotos.baidu.com/image/pic/item/0df431adcbef760958fcf3e12cdda3cc7dd99edc.jpg";	KJBitmap kjBitmap = KJBitmap.create();		private RotateAnimation progressbar_rotate;			@Override	protected void onCreate(Bundle savedInstanceState)	{		// TODO Auto-generated method stub		super.onCreate(savedInstanceState);				setContentView(R.layout.aty_pullscrolllist);				progressbar_rotate = (RotateAnimation) AnimationUtils.loadAnimation(				this, R.anim.rotate_imageview);				pullrefreshview_scroll_listview = (PullToRefreshView) findViewById(R.id.pullrefreshview_scroll_listview);		lv_pullscrolllist = (ListViewForScrollView) findViewById(R.id.lv_pullscrolllist);				pullrefreshview_scroll_listview.setOnHeaderRefreshListener(this);		pullrefreshview_scroll_listview.setOnFooterRefreshListener(this);						datas = new ArrayList<DataBean>();		for(int i=0;i<20;i++)		{			DataBean itemBean = new DataBean();			itemBean.name = "lucifer";			itemBean.url = imageUrl;			datas.add(itemBean);		}		adapter = new ListAdapter(datas);		lv_pullscrolllist.setAdapter(adapter);	}					class DataBean	{		String name;		String url;	}				static class ViewHolderPullScrollList	{		ImageView img;		TextView tv;	}				class ListAdapter extends BaseAdapter	{		private ArrayList<DataBean> list;				public ListAdapter(ArrayList<DataBean> dbs)		{			this.list = dbs;		}				@Override		public int getCount()		{			return list.size();		}		@Override		public Object getItem(int position)		{			return list.get(position);		}		@Override		public long getItemId(int position)		{			return position;		}		@Override		public View getView(int position, View convertView, ViewGroup parent)		{			ViewHolderPullScrollList holder = null;			if (convertView == null)			{				holder = new ViewHolderPullScrollList();				convertView = View.inflate(PullScrollListActivity.this, R.layout.item_list, null);				holder.img = (ImageView) convertView.findViewById(R.id.item_iv);				holder.tv = (TextView) convertView.findViewById(R.id.item_tv);				convertView.setTag(holder);			} 			else			{				holder = (ViewHolderPullScrollList) convertView.getTag();			}						DataBean currentDataBean = list.get(position);//			kjBitmap.display(holder.img, imageUrl);			holder.img.setImageResource(R.drawable.ic_launcher);			holder.tv.setText(currentDataBean.name);									return convertView;		}	}	@Override	public void onHeaderRefresh(PullToRefreshView view)	{		// TODO Auto-generated method stub		datas.clear();		for(int i=0;i<20;i++)		{			DataBean itemBean = new DataBean();			itemBean.name = "lucifer";			itemBean.url = imageUrl;			datas.add(itemBean);		}		adapter.notifyDataSetChanged();		pullrefreshview_scroll_listview.onHeaderRefreshComplete();	}					@Override	public void onFooterRefresh(PullToRefreshView view)	{		// TODO Auto-generated method stub		datas.clear();		for(int i=0;i<10;i++)		{			DataBean itemBean = new DataBean();			itemBean.name = "lucifer";			itemBean.url = imageUrl;			datas.add(itemBean);		}		adapter.notifyDataSetChanged();		pullrefreshview_scroll_listview.onFooterRefreshComplete();	}			}